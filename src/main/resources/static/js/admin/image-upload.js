function updateFileInfo(i){var e,d=i.value,t=d.match(/([^\/\\]+)$/);e=null==t?"Add Image":t[1],$('label[for^="'+i.id+'"]').text(e);for(var a=$('form[id="uploader"] input'),l=!0,n=0;n<a.length;n++)""==a[n].value&&(l=!1);l?$("button.uploader").removeAttr("disabled"):$("button.uploader").attr("disabled","true")}function fileCheck(i){if($('input[id="'+i.id+'"]')[0].files.length>0){var e=$('input[id="'+i.id+'"]')[0].files[0].size,d=$('input[id="'+i.id+'"]')[0].files[0].type,t=1<<20,a=4*t;if(e>a)return $('input[id="'+i.id+'"]')[0].type="text",$('input[id="'+i.id+'"]')[0].type="file",$('p[id="fileMessage"]').html("File too large. Max file size is "+a/t+"MB"),void $('div[id="fileError"]').removeClass("hide");switch(d){case"image/png":case"image/jpeg":$('div[id="fileError"]').addClass("hide");break;default:$('input[id="'+i.id+'"]')[0].type="text",$('input[id="'+i.id+'"]')[0].type="file",$('p[id="fileMessage"]').html("Incorrect file type. All files must be a PNG"),$('div[id="fileError"]').removeClass("hide")}}}var fn;!function(){$('button[id="upload"]').click(function(){$('div[id="content"]').addClass("hide"),$('div[id="uploadSpinner"]').removeClass("hide")}),$('button[id="uploadAjax"]').click(function(i){i.preventDefault(),$('div[id="content"]').addClass("hide"),$('div[id="uploadSpinner"]').removeClass("hide");var e=new FormData($('form[id="uploader"]')[0]);$.ajax({url:"/admin/image/upload",type:"POST",data:e,contentType:!1,processData:!1,success:function(i){$("input.uploader").val(""),$('div[id="content"]').removeClass("hide"),$('div[id="uploadSpinner"]').addClass("hide"),updateFileInfo($("input.uploader")[0]),$.isFunction(fn)&&fn()}})}),$("input.uploader").change(function(){fileCheck(this),updateFileInfo(this)})}();